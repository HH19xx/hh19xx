# VAproject Development Notes

## コーディング規約

### コメント記述ルール

- **必須**: すべての処理にコメントで具体的な処理内容を記述する
- **禁止**: 「適切に」「正しく」「うまく」などの曖昧な表現は使用しない
- **具体性**: 何をどのように処理するかを明確に記述する
- **文体**: 敬体ではなく常体を使用する（文字数削減のため）

例：

// 悪い例
// データを適切に処理する

// 良い例
// ユーザーIDをキーにしてデータベースからユーザー情報を取得し、
// 取得したデータのパスワードフィールドを空文字で上書きしてから返す

このルールは今後のすべてのコード作成・修正時に適用する。

## プロセス・ポート管理ルール

### 起動プロセスの必須終了作業

- **必須**: テスト・検証完了後は必ず起動したプロセスを終了してポートを解放する
- **対象**: Docker、開発サーバー（npm run dev、yarn dev等）、データベース、その他すべての起動プロセス
- **Docker**: `docker-compose down`でコンテナを終了する
- **開発サーバー**: Ctrl+CまたはPIDを特定して`taskkill //F //PID [番号]`で終了する
- **理由**: ポートの解放とリソースの適切な管理のため
- **確認方法**: `netstat -ano | findstr ":[ポート番号]"`でポート使用状況を確認する

## コーディングに関する会話開始時のルール

### ドキュメント確認作業

- **必須**: 会話開始時に必ずドキュメントが入っていると思われるディレクトリ(「docs」等)を探し、その内容を閲覧する。見つからなければ閲覧の必要はない。
- **理由**: これまでの開発の方針を維持し、デグレを行わないため

このルールは今後のすべての開発・テスト作業時に適用する。

## ファイル作成時のエンコーディングルール

### 日本語を含むファイルの作成方法

- **禁止**: Writeツールで日本語を含むファイルを作成しない(Windows環境で文字化けが発生する)
- **必須**: 日本語を含むファイルはBashのcatコマンドとheredoc(EOF)を使用してUTF-8で作成する
- **理由**: Writeツールでは文字エンコーディングが正しく処理されず、日本語が文字化けする

例：

```bash
cat > src/example.js << 'EOF'
// 日本語コメント
const message = "こんにちは";
EOF
```

このルールは日本語を含むすべてのファイル作成時に適用する。

## コード修正時のルール

### コメントアウトの保持

- **必須**: コードを修正・削除する際は、古いコードをコメントアウトして残す
- **理由**: 変更履歴を追跡し、必要に応じて以前の実装を参照できるようにするため

## 作業プロセス（学習モード）

### 実装前の手順説明

- **必須**: 実装を開始する前に、会話欄で作業手順を箇条書きで示す。また、必要に応じて実装例をも示す。
- **簡潔な説明**: 作業中は簡単な説明を添える（詳細はユーザーが自己学習する）
- **理由**: ユーザーが学習しながら開発を進めるため
